<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html 	xmlns="http://www.w3.org/1999/xhtml"
		xmlns:ui="http://java.sun.com/jsf/facelets"
	    xmlns:h="http://java.sun.com/jsf/html"  
	    xmlns:f="http://java.sun.com/jsf/core"  
	    xmlns:p="http://primefaces.org/ui">  
    <h:head>  
  		<title>Hello, Stalker!</title>
    </h:head>  
    <h:body>  
    	<ui:composition template="/templates/menuBar.xhtml">
		    <ui:define name="title">
		        STALKNET
		    </ui:define>
		    <ui:define name="left">
		        <f:facet name="header">
       				<h:outputText value="Новости" />
       			</f:facet>
       			<h:form id="leftForm">
    				<p:accordionPanel value="#{mainPage.newsList}"  rendered="#{mainPage.newsList.size() &gt; 0}" var="new" multiple="true"> 
		       			<p:tab title="#{new.name}"> 
		     				<h:outputText value="#{new.description}" escape="false" />  
					    </p:tab> 
     				</p:accordionPanel>
				</h:form>  
				<p:outputLabel rendered="#{mainPage.newsList.size() == 0}">Новостей нет</p:outputLabel>   
		    </ui:define>
		    <ui:define name="right">
		        <f:facet name="header">
       				<h:outputText value="Ближайшее событие (игра)" />
       			</f:facet>
       			<h:form id="rightForm">
       				<p:growl id="growl" showDetail="false" />
       				<p:outputPanel deferred="true" rendered="#{mainPage.lastEvent != null}">
       					<p:panel>
       						<f:facet name="header">
       							#{mainPage.lastEvent.name}
       						</f:facet>
					        <h:outputText escape="false" value="#{mainPage.lastEvent.description}" />
					        <f:facet name="footer">
       							<table style="border:0px;">
	       							<tr>
	       								<td align="right">Начало игры: </td>
	       								<td><h:outputText value="#{mainPage.getEventTime(mainPage.lastEvent.dateStart)}" /></td>
	       								<td rowspan="2" style="width:30%">
	       									<h:panelGroup id="reqBut">
		       									<p:commandButton rendered="#{!mainPage.checkIsStalkerInEvent()}" value="Подать заявку" actionListener="#{mainPage.addStalkerToEvent()}" update="growl reqBut" />
		       									<p:button disabled="true" rendered="#{mainPage.checkIsStalkerInEvent()}" value="Заявка подана" />
	       									</h:panelGroup>
	       								</td>
	       							</tr>
	       							<tr>
	       								<td align="right">Окончание игры: </td>
	       								<td><h:outputText value="#{mainPage.getEventTime(mainPage.lastEvent.dateEnd)}" /></td>
	       							</tr>
       							</table>
       						</f:facet>
					    </p:panel>  
       				</p:outputPanel>
       				<p:outputLabel rendered="#{mainPage.lastEvent == null}">Событий нет</p:outputLabel>
		        </h:form>
		    </ui:define>
		</ui:composition>
    </h:body>  
</html> 